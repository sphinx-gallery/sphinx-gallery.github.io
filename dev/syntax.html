

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>How to structure your Python scripts for Sphinx-Gallery &mdash; Sphinx-Gallery 0.7.0.dev0-git documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_override.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery-dataframe.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Configuration" href="configuration.html" />
    <link rel="prev" title="Getting Started with Sphinx-Gallery" href="getting_started.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Sphinx-Gallery
          

          
          </a>

          
            
            
              <div class="version">
                0.7.0.dev0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
      <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Versions</span>
        v: dev
        <span class="fa fa-caret-down"></span>
      </span>
      <div class="rst-other-versions">
        <dl>
          <dt>Versions</dt>
          
            <dd><a href="https://sphinx-gallery.github.io/dev">dev</a></dd>
          
            <dd><a href="https://sphinx-gallery.github.io/stable">stable</a></dd>
          
        </dl>
      </div>
    </div>

    
            
            
              
            
            
              <p class="caption"><span class="caption-text">Using Sphinx Gallery</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started with Sphinx-Gallery</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">How to structure your Python scripts for Sphinx-Gallery</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#a-simple-example">A simple example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#embed-rst-in-your-example-python-files">Embed rST in your example Python files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="projects_list.html">Who uses Sphinx-Gallery</a></li>
</ul>
<p class="caption"><span class="caption-text">Advanced usage and information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Advanced usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">Sphinx-Gallery Utilities</a></li>
</ul>
<p class="caption"><span class="caption-text">Example galleries</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="auto_examples/index.html">Gallery of Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/index.html">Notebook style example</a></li>
<li class="toctree-l1"><a class="reference internal" href="auto_mayavi_examples/index.html">Gallery of Examples using Mayavi</a></li>
</ul>
<p class="caption"><span class="caption-text">API and developer reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Sphinx-Gallery API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="changes.html">Change Log</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/sphinx-gallery/sphinx-gallery">Fork sphinx-gallery on Github</a></li>
</ul>

            
          

  
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Sphinx-Gallery</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>How to structure your Python scripts for Sphinx-Gallery</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="how-to-structure-your-python-scripts-for-sphinx-gallery">
<span id="python-script-syntax"></span><h1>How to structure your Python scripts for Sphinx-Gallery<a class="headerlink" href="#how-to-structure-your-python-scripts-for-sphinx-gallery" title="Permalink to this headline">¶</a></h1>
<p>This page describes the structure and syntax that can be used in Python scripts
to generate rendered HTML gallery pages.</p>
<div class="section" id="a-simple-example">
<h2>A simple example<a class="headerlink" href="#a-simple-example" title="Permalink to this headline">¶</a></h2>
<p>Sphinx-Gallery expects each Python file to have two things:</p>
<ol class="arabic">
<li><p><strong>A docstring</strong>, written in rST, that defines the
header for the example. It must begin by defining a rST title. The title
may contain any punctuation mark but cannot start with the same punctuation
mark repeated more than 3 times. For example:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">&quot;This&quot; is my example-script</span>
<span class="sd">===========================</span>

<span class="sd">This example doesn&#39;t do much, it just makes a simple plot</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
</li>
<li><p><strong>Python code</strong>. This can be any valid Python code that you wish. Any
Matplotlib images that are generated will be saved to disk, and
the rST generated will display these images with the built examples. By
default only images generated by Matplotlib, or packages based on Matplotlib
(e.g., Seaborn or Yellowbrick) are saved and displayed. However, you can
change this to include other packages, see <a class="reference internal" href="configuration.html#image-scrapers"><span class="std std-ref">Image scrapers</span></a>.</p></li>
</ol>
<p>For a quick reference have a look at the example
<a class="reference internal" href="auto_examples/plot_0_sin.html#sphx-glr-auto-examples-plot-0-sin-py"><span class="std std-ref">Introductory example - Plotting sin</span></a></p>
</div>
<div class="section" id="embed-rst-in-your-example-python-files">
<span id="embedding-rst"></span><h2>Embed rST in your example Python files<a class="headerlink" href="#embed-rst-in-your-example-python-files" title="Permalink to this headline">¶</a></h2>
<p>Additionally, you may embed rST syntax within your Python scripts. This will
be rendered in-line with the Python code and its outputs, similar to how
Jupyter Notebooks are structured (in fact, Sphinx-Gallery also <strong>creates</strong> a
Jupyter Notebook for each example that is built).</p>
<p>You can embed rST in your Python examples by including a line of &gt;= 20 <code class="docutils literal notranslate"><span class="pre">#</span></code>
symbols, <code class="docutils literal notranslate"><span class="pre">#%%</span></code>, or <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">%%</span></code>. For consistency, it is recommended that you use
only one of the above three ‘block splitter’ options in your project. If using
<code class="docutils literal notranslate"><span class="pre">#</span></code>’s, we recommend using 79 <code class="docutils literal notranslate"><span class="pre">#</span></code>’s, like this:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1">###############################################################################</span>
</pre></div>
</div>
<p>Any commented lines (a line beginning with <code class="docutils literal notranslate"><span class="pre">#</span></code> followed by a space, to be
PEP8-compliant) that immediately follow a block splitter will be rendered as
rST in the built gallery examples. For example:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># This is commented python</span>
<span class="n">myvariable</span> <span class="o">=</span> <span class="mi">2</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;my variable is </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">myvariable</span><span class="p">))</span>

<span class="c1"># %%</span>
<span class="c1"># This is a section header</span>
<span class="c1"># ------------------------</span>
<span class="c1">#</span>
<span class="c1"># In the built documentation, it will be rendered as rST.</span>

<span class="c1"># These lines won&#39;t be rendered as rST because there is a gap after the last</span>
<span class="c1"># commented rST block. Instead, they&#39;ll resolve as regular Python comments.</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;my variable plus 2 is </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">myvariable</span> <span class="o">+</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">#%%</span></code> and <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">%%</span></code> syntax is consistent with the ‘code block’ (or
‘code cell’) separator syntax in <a class="reference external" href="https://code.visualstudio.com/docs/python/jupyter-support-py">Jupyter VSCode plugin</a>, <a class="reference external" href="https://jupytext.readthedocs.io/en/latest/introduction.html">Jupytext</a>, <a class="reference external" href="https://www.jetbrains.com/help/pycharm/running-jupyter-notebook-cells.html">Pycharm</a>,
<a class="reference external" href="https://nteract.gitbooks.io/hydrogen/">Hydrogen plugin (for Atom)</a> and <a class="reference external" href="https://docs.spyder-ide.org/editor.html">Spyder</a>. Note that although the
documentation may only mention one of <code class="docutils literal notranslate"><span class="pre">#%%</span></code> or <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">%%</span></code>, in practice both
work in these editors. In these IDEs (or with these IDE plugins), <code class="docutils literal notranslate"><span class="pre">#%%</span></code> or
<code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">%%</span></code> at the start of a line signifies the start of a new code block.
Code within a code block can be easily executed together, at the same time. This
functionality can be helpful when writing a Sphinx-Gallery <code class="docutils literal notranslate"><span class="pre">.py</span></code> example as
the blocks allow you to easily create pairs of subsequent Sphinx-Gallery text
and code blocks.</p>
<p>Here are the contents of an example Python file using the ‘code block’
functionality:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This is my example script</span>
<span class="sd">=========================</span>

<span class="sd">This example doesn&#39;t do much, it just makes a simple plot</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># %%</span>
<span class="c1"># This is a section header</span>
<span class="c1"># ------------------------</span>
<span class="c1"># This is the first section!</span>
<span class="c1"># The `#%%` signifies to Sphinx-Gallery that this text should be rendered as</span>
<span class="c1"># rST and if using one of the above IDE/plugin&#39;s, also signifies the start of a</span>
<span class="c1"># &#39;code block&#39;.</span>

<span class="c1"># This line won&#39;t be rendered as rST because there&#39;s a space after the last block.</span>
<span class="n">myvariable</span> <span class="o">=</span> <span class="mi">2</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;my variable is </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">myvariable</span><span class="p">))</span>
<span class="c1"># This is the end of the &#39;code block&#39; (if using an above IDE). All code within</span>
<span class="c1"># this block can be easily executed all at once.</span>

<span class="c1"># %%</span>
<span class="c1"># This is another section header</span>
<span class="c1"># ------------------------------</span>
<span class="c1">#</span>
<span class="c1"># In the built documentation, it will be rendered as rST after the code above!</span>
<span class="c1"># This is also another code block.</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;my variable plus 2 is </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">myvariable</span> <span class="o">+</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<p>For a clear example refer to the rendered example
<a class="reference internal" href="tutorials/plot_parse.html#sphx-glr-tutorials-plot-parse-py"><span class="std std-ref">Alternating text and code</span></a> and compare it to the generated
<a class="reference download internal" download="" href="_downloads/a21866f88df7b645bec2f3a77a6e667f/plot_parse.py"><code class="xref download docutils literal notranslate"><span class="pre">original</span> <span class="pre">python</span> <span class="pre">script</span></code></a></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="configuration.html" class="btn btn-neutral float-right" title="Configuration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="getting_started.html" class="btn btn-neutral float-left" title="Getting Started with Sphinx-Gallery" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014-2020, Sphinx-gallery developers

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>